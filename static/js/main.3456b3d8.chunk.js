(this["webpackJsonphomestuck-bookclub-guesses"]=this["webpackJsonphomestuck-bookclub-guesses"]||[]).push([[0],{121:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),s=a.n(c),o=(a(97),a(19)),u=a(34),l=a(12),i=a(158),d=a(159),m=a(160),p=a(161),g=a(152),E=Object(g.a)((function(e){return{banner:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},space:{flex:"1 1 auto"},icon:{height:"25px"}}})),f=a(155),h=a(174),w=a(171),b=a(175),v=Object(g.a)((function(e){return{root:{padding:"0 10px",width:"max-content"},item:{},select:{minWidth:"200px",width:"max-content","&:before":{borderColor:e.palette.secondary.contrastText},"&:after":{borderColor:e.palette.secondary.contrastText}},icon:{fill:e.palette.secondary.contrastText},label:{color:e.palette.secondary.contrastText,marginLeft:"10px"}}})),k={people:[],status:"unloaded"},_=function(e){return e.people};var I=a(14),y=a(81),O=a.n(y).a.create({baseURL:"https://hsbcguesserapi.azurewebsites.net/"}),x={type:"GET_PEOPLE_START"},j={type:"GET_PEOPLE_ERROR"};function N(e){var t,a=v(),n=Object(I.c)(_),c=Object(I.b)();return"unloaded"===n.status&&function(e){e(x),O.get("/people").then((function(t){return e({type:"GET_PEOPLE_SUCCESS",data:t.data})})).catch((function(t){return e(j)}))}(c),r.a.createElement(f.a,{className:a.root,disabled:void 0!==e.selected},r.a.createElement(h.a,{className:a.label,htmlFor:e.id},"User"),r.a.createElement(w.a,{inputProps:{name:"user",id:e.id,classes:{icon:a.icon}},value:null===(t=e.selected)||void 0===t?void 0:t.name,onChange:function(t){return e.setSelected(n.people.filter((function(e){return e.name===t.target.value}))[0])},className:a.select,style:{color:void 0!==e.selected?e.selected.colour:"black"}},n.people.map((function(e){return r.a.createElement(b.a,{className:a.item,style:{color:e.colour},value:e.name},e.name)}))))}function S(e){var t=E();return r.a.createElement("header",null,r.a.createElement(i.a,{position:"static"},r.a.createElement(d.a,{className:t.banner,variant:"dense"},r.a.createElement(u.b,{to:be},r.a.createElement(m.a,null,r.a.createElement("img",{src:"/homestuck-bookclub-guesses/sburb.png",className:t.icon}))),r.a.createElement(p.a,{variant:"h6",noWrap:!0},"Homestuck Book Club Guesser"),r.a.createElement("div",{className:t.space}),r.a.createElement(N,{id:"people",selected:e.user,setSelected:function(t){return e.setUser(t)}}))))}var C=a(162),P=a(163),T=a(164),R=Object(g.a)((function(e){return{root:{display:"flex",marginBottom:"15px"},picture:{width:"150px",height:"150px"},title:{fontFamily:'"Courier New", monospace',fontWeight:"bold"},subtitle:{fontFamily:'"Courier New", monospace',fontWeight:"bold"},content:{flex:"1 auto"},choose:{padding:0,width:"150px",height:"150px"},arrow:{margin:"63px 63px"},link:{textDecoration:"none"}}}));function W(e){var t=R();return r.a.createElement(C.a,{className:t.root},r.a.createElement(P.a,{className:t.picture,component:"img",src:e.image,title:e.title}),r.a.createElement(T.a,{className:t.content},r.a.createElement(p.a,{className:t.title,variant:"h5"},e.title),r.a.createElement(p.a,{className:t.subtitle,variant:"subtitle1",color:"textSecondary"},"".concat(e.firstPage," \u2013 ").concat(e.lastPage))),e.showButton?r.a.createElement(u.b,{className:t.link,to:"".concat(be,"week/").concat(e.id)},r.a.createElement(m.a,{className:t.choose},r.a.createElement(p.a,{variant:"h6"},"==>"))):r.a.createElement(r.a.Fragment,null))}var G={type:"GET_WEEKS_START"},A={type:"GET_WEEKS_ERROR"};function B(){return function(e){return e(G),O.get("/week").then((function(t){return e({type:"GET_WEEKS_SUCCESS",data:t.data})})).catch((function(t){return e(A)}))}}var F={weeks:[],status:"unloaded"},L=function(e){return e.week};function U(){var e=Object(I.c)(L),t=Object(I.b)(),a=[];switch("unloaded"===e.status&&B()(t),e.status){case"loaded":e.weeks.forEach((function(e){a.push(r.a.createElement(W,{id:e.id,title:e.name,firstPage:e.firstPage,lastPage:e.lastPage,image:e.pictureSrc,showButton:!0}))}))}return r.a.createElement(r.a.Fragment,null,a)}var K=a(169),M=a(170),z=a(84),D=Object(z.a)({palette:{primary:{main:"#2CFF4B",light:"#80ff92",dark:"#082A00",contrastText:"white"},secondary:{main:"#969696",light:"#f2f2f2",contrastText:"white"}},typography:{fontFamily:'"Courier New", courier, monospace',body1:{fontWeight:"bold"},h6:{fontWeight:"bold"},h5:{fontWeight:"bold"},subtitle1:{fontWeight:"bold"}}}),J=a(166),H=a(167),$=a(63),q=a(172),Q=a(168),V=a(17),X={},Y=function(e){return e.pages};function Z(e){return function(t){return t(function(e){return{type:"get_pages_start",weekId:e}}(e)),O.get("/week/".concat(e,"/page")).then((function(a){return t(function(e,t){return{type:"get_pages_success",weekId:e,data:t}}(e,a.data))})).catch((function(a){return t(function(e){return{type:"get_pages_error",weekId:e}}(e))}))}}var ee=a(165),te=a(173),ae=a(88),ne=Object(g.a)((function(e){return{pageCard:{width:"220px",height:350},pageButton:{width:"220px",height:350,fontSize:"3em"},modal:{position:"absolute",width:700,height:300,margin:"auto",border:"2px solid #000",boxShadow:e.shadows[5]},modalContent:{height:252,width:652,backgroundColor:"white",outline:"none",padding:24},modalGrid:{height:202},cardContent:{width:220,flex:"1 0 auto"},cardMedia:{width:220,height:220,objectPosition:"bottom"},cardButton:{width:220,height:350,display:"flex",flexDirection:"column"},title:{textAlign:"center"},description:{textAlign:"left"}}}));function re(e){var t=ne();return r.a.createElement(C.a,{className:t.pageCard},r.a.createElement(m.a,{className:t.pageButton,onClick:e.onAdd},"+"))}function ce(e){var t=ne();return r.a.createElement(C.a,{className:t.pageCard},r.a.createElement(ae.a,{className:t.cardButton,onClick:function(){return window.open("https://www.homestuck.com/story/".concat(e.pageNumber))}},r.a.createElement(T.a,{className:t.cardContent},r.a.createElement(p.a,{className:t.title,variant:"h6"},"#",e.pageNumber)),r.a.createElement(P.a,{className:t.cardMedia,component:"img",title:e.pageNumber.toString(),src:e.pictureSrc}),r.a.createElement(T.a,{className:t.cardContent},r.a.createElement(p.a,{className:t.description,variant:"subtitle1"},e.description))))}var se=a(157);function oe(e){var t=ne(),a=Object(n.useState)(0),c=Object(o.a)(a,2),s=c[0],u=c[1],l=Object(n.useState)(""),i=Object(o.a)(l,2),d=i[0],g=i[1],E=Object(n.useState)(""),f=Object(o.a)(E,2),h=f[0],w=f[1];return r.a.createElement("div",{className:t.modalContent},r.a.createElement(ee.a,{className:t.modalGrid,container:!0},r.a.createElement(ee.a,{item:!0,xs:12},r.a.createElement(p.a,{variant:"h4"},"Add New Page")),r.a.createElement(ee.a,{item:!0,xs:6},r.a.createElement("label",null,"Page Number")),r.a.createElement(ee.a,{item:!0,xs:6},r.a.createElement(se.a,{type:"number",value:s,onChange:function(e){return u(parseInt(e.target.value))}})),r.a.createElement(ee.a,{item:!0,xs:6},r.a.createElement("label",null,"Description")),r.a.createElement(ee.a,{item:!0,xs:6},r.a.createElement(se.a,{type:"text",value:d,onChange:function(e){return g(e.target.value)}})),r.a.createElement(ee.a,{item:!0,xs:6},r.a.createElement("label",null,"Image Link")),r.a.createElement(ee.a,{item:!0,xs:6},r.a.createElement(se.a,{type:"text",value:h,onChange:function(e){return w(e.target.value)}}))),r.a.createElement(m.a,{onClick:function(){return e.onAccept(s,d,h)},variant:"contained",color:"primary"},"Add"))}function ue(e){var t=Object(I.c)(Y),a=Object(n.useState)(!1),c=Object(o.a)(a,2),s=c[0],u=c[1],l=t[e.weekId],i=Object(I.b)(),d=ne(),m=[];if(void 0===l)Z(e.weekId)(i);else switch(l.status){case"unloaded":Z(e.weekId)(i);break;case"loading":m.push(r.a.createElement(ee.a,{item:!0,xs:12},r.a.createElement(J.a,null)));break;case"loaded":l.pages.forEach((function(e){m.push(r.a.createElement(ee.a,{item:!0,xs:4},r.a.createElement(ce,e)))})),m.push(r.a.createElement(ee.a,{item:!0,xs:4},r.a.createElement(re,{weekId:e.weekId,onAdd:function(){return u(!0)}})));break;case"errored":m.push(r.a.createElement(ee.a,{item:!0,xs:12},r.a.createElement("span",null,"Error")))}return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{container:!0,spacing:3,justify:"space-evenly"},m),r.a.createElement(te.a,{className:d.modal,open:s,onClose:function(){return u(!1)}},r.a.createElement(oe,{onAccept:function(t,a,n){var r,c;u(!1),(r=e.weekId,c={pageNumber:t,description:a,pictureSrc:n},function(e){return e(function(e){return{type:"add_page_start",weekId:e}}(r)),O.put("/week/".concat(r,"/page"),c).then((function(t){return e(function(e){return{type:"add_page_success",weekId:e}}(r))})).catch((function(t){return e(function(e){return{type:"add_page_error",weekId:e}}(r))}))})(i)}})))}var le=a(62),ie=Object(g.a)((function(e){return{icon:{margin:"0 auto"},button:{marginTop:e.spacing(2),marginRight:e.spacing(2),fontWeight:"bold"}}})),de={},me=function(e){return e.answers};function pe(e){var t,a,c=ie(),s=Object(I.c)(Y),u=Object(I.c)(me)[e.weekId],l=Object(I.b)(),i=void 0,d=void 0;void 0!==u&&"unloaded"!==u.status||(t=e.weekId,a=e.userId,function(e){return e(function(e,t){return{type:"get_answers_start",weekId:e,userId:t}}(t,a)),O.get("/week/".concat(t,"/answer?personId=").concat(null!==a&&void 0!==a?a:null)).then((function(n){var r=n.data.map((function(e){return{personId:e.person.id,flushedPage:e.flushed.pageNumber,pitchPage:e.pitch.pageNumber}}));return e(function(e,t,a){return{type:"get_answers_success",weekId:e,userId:t,data:a}}(t,a,r))})).catch((function(n){return e(function(e,t){return{type:"get_answers_error",weekId:e,userId:t}}(t,a))}))})(l),void 0!==u&&void 0!==e.userId&&e.userId in u.answers&&(i=u.answers[e.userId].flushedPage,d=u.answers[e.userId].pitchPage);var p=Object(n.useState)(i),g=Object(o.a)(p,2),E=g[0],f=g[1],h=Object(n.useState)(d),v=Object(o.a)(h,2),k=v[0],_=v[1];return Object(n.useEffect)((function(){f(i),_(d)}),[null===u||void 0===u?void 0:u.status]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{container:!0,spacing:5},r.a.createElement(ee.a,{item:!0,xs:6},r.a.createElement(C.a,{className:c.icon},r.a.createElement(T.a,null,r.a.createElement(le.a,{color:"red",size:"7x",icon:"heart"}),r.a.createElement(w.a,{onChange:function(e){return f(e.target.value)},value:null!==E&&void 0!==E?E:""},s[e.weekId].pages.filter((function(e){return e.pageNumber!==k})).map((function(e){return r.a.createElement(b.a,{value:e.pageNumber},e.description)})))))),r.a.createElement(ee.a,{item:!0,xs:6},r.a.createElement(C.a,{className:c.icon},r.a.createElement(T.a,null,r.a.createElement(le.a,{className:c.icon,color:"black",size:"7x",icon:"spade"}),r.a.createElement(w.a,{onChange:function(e){return _(e.target.value)},value:null!==k&&void 0!==k?k:""},s[e.weekId].pages.filter((function(e){return e.pageNumber!==E})).map((function(e){return r.a.createElement(b.a,{value:e.pageNumber},e.description)}))))))),r.a.createElement(m.a,{className:c.button,color:"primary",variant:"contained",disabled:void 0===E||void 0===k||E===i&&k===d,onClick:function(){void 0!==u&&e.userId in u.answers?function(e,t){return function(a){return a(function(e){return{type:"edit_answer_start",weekId:e}}(e)),O.patch("/week/".concat(e,"/answer"),t).then((function(t){return a(function(e){return{type:"edit_answer_success",weekId:e}}(e))})).catch((function(t){return a(function(e){return{type:"edit_answer_error",weekId:e}}(e))}))}}(e.weekId,{personId:e.userId,flushedPage:E,pitchPage:k})(l):function(e,t){return function(a){return a(function(e){return{type:"add_answer_start",weekId:e}}(e)),O.put("/week/".concat(e,"/answer"),t).then((function(t){return a(function(e){return{type:"add_answer_success",weekId:e}}(e))})).catch((function(t){return a(function(e){return{type:"add_answer_error",weekId:e}}(e))}))}}(e.weekId,{personId:e.userId,flushedPage:E,pitchPage:k})(l)}},"Submit"),r.a.createElement(m.a,{className:c.button,color:"primary",variant:"contained",disabled:!0},"Reveal"))}function ge(e){var t,a=Object(n.useState)("pages"),c=Object(o.a)(a,2),s=c[0],u=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{id:e.week.id,title:e.week.name,firstPage:e.week.firstPage,lastPage:e.week.lastPage,image:e.week.pictureSrc,showButton:!1}),r.a.createElement($.a,{value:s},r.a.createElement(q.a,{onChange:function(e,t){u(t)},variant:"fullWidth"},r.a.createElement(H.a,{value:"pages",label:"Pages",wrapped:!0}),r.a.createElement(H.a,{value:"answer",label:"My Answer",disabled:void 0===e.user,wrapped:!0}),r.a.createElement(H.a,{value:"guesses",label:"My Guesses",disabled:void 0===e.user,wrapped:!0})),r.a.createElement(Q.a,{value:"pages"},r.a.createElement(ue,{weekId:e.week.id})),r.a.createElement(Q.a,{value:"answer"},r.a.createElement(pe,{weekId:e.week.id,userId:null===(t=e.user)||void 0===t?void 0:t.id})),r.a.createElement(Q.a,{value:"guesses"},"This bit of the site is still under construction :(")))}function Ee(e){var t=Object(l.f)().id,a=[],n=Object(I.c)(L),c=Object(I.b)();switch(n.status){case"unloaded":B()(c),a.push(r.a.createElement(J.a,null));break;case"loading":a.push(r.a.createElement(J.a,null));break;case"errored":a.push(r.a.createElement(p.a,null,"There was an error loading the weeks"));break;default:var s=n.weeks.filter((function(e){return e.id===parseInt(t)}))[0];void 0!==s&&a.push(r.a.createElement(ge,{week:s,user:e.user}))}return r.a.createElement(r.a.Fragment,null,a)}var fe=Object(g.a)((function(e){return{container:{marginTop:"10px"}}})),he=a(51),we=a(82);he.b.add(we.a);var be="/homestuck-bookclub-guesses/";var ve=function(){var e=Object(n.useState)(void 0),t=Object(o.a)(e,2),a=t[0],c=t[1],s=fe();return r.a.createElement(K.a,{theme:D},r.a.createElement(u.a,null,r.a.createElement(S,{user:a,setUser:function(e){return c(e)}}),r.a.createElement(M.a,{className:s.container,maxWidth:"lg"},r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"".concat(be,"week/:id")},r.a.createElement(Ee,{user:a})),r.a.createElement(l.a,{path:be},r.a.createElement(U,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ke=a(33),_e=Object(ke.combineReducers)({week:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_WEEKS_START":return{weeks:[],status:"loading"};case"GET_WEEKS_SUCCESS":return{weeks:t.data,status:"loaded"};case"GET_WEEKS_ERROR":return{weeks:[],status:"errored"};default:return e}},pages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"get_pages_start":return e[t.weekId]={status:"loading",pages:[]},Object(V.a)({},e);case"get_pages_error":return e[t.weekId]={status:"errored",pages:[]},Object(V.a)({},e);case"get_pages_success":return e[t.weekId]={status:"loaded",pages:t.data},Object(V.a)({},e);case"add_page_success":case"add_page_error":return e[t.weekId]={status:"unloaded",pages:[]},Object(V.a)({},e);default:return e}},people:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PEOPLE_START":return{people:[],status:"loading"};case"GET_PEOPLE_SUCCESS":return{people:t.data,status:"loaded"};case"GET_PEOPLE_ERROR":return{people:[],status:"errored"};default:return e}},answers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"get_answers_start":return e[t.weekId]={status:"loading",answers:{}},Object(V.a)({},e);case"get_answers_error":return e[t.weekId]={status:"errored",answers:{}},Object(V.a)({},e);case"get_answers_success":var a={};return t.data.forEach((function(e){return a[e.personId]=e})),e[t.weekId]={status:"loaded",answers:a},Object(V.a)({},e);case"add_answer_success":case"add_answer_error":case"edit_answer_success":case"edit_answer_error":return e[t.weekId]={status:"unloaded",answers:{}},Object(V.a)({},e);default:return e}}}),Ie=a(83),ye=Object(ke.createStore)(_e,Object(Ie.composeWithDevTools)());s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I.a,{store:ye},r.a.createElement(ve,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},92:function(e,t,a){e.exports=a(121)},97:function(e,t,a){}},[[92,1,2]]]);
//# sourceMappingURL=main.3456b3d8.chunk.js.map